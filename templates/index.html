<!DOCTYPE html>
<html>
    <head>
        <title>{{ title }}</title>
        <script src="/static/js/jquery.min.js"></script>
        <script src="//use.typekit.net/rie5vxi.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
        <link rel="stylesheet" href="/static/styles/style.css">
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
    </head>
    <body>
        <div id="navBar"><div id="yakLogo"><img src="/static/img/yak.png" /></div></div>
        <div id="yaks">
        </div>

        <script>
            $(function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                } else { 
                    alert("Geolocation is not supported by this browser.");
                }
            });
        
            function showPosition(position) {
                $.getJSON('/get_yaks', {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                }, function(data) {
                    jQuery.each(data.messages, function(i, val) {
                        console.log(val);
                        var buildVotes = "<div class=\"yakVotes\"><div class=\"upVote\"></div><div class=\"totalVote\">" + val.numberOfLikes + "</div><div class=\"downVote\"></div></div>"
                        $("#yaks").append("<div class=\"yak\">" + buildVotes + "<div class=\"yakText\">" + val.message + "</div></div>");
                    });
                });
            }
        </script>
    </body>
</html>
